upstream prd-drone {
	server prd-drone-server:80;
}

server {
    listen                      443 ssl;
    server_name                 drone.theautomation.nl;
    server_tokens               off;

    ssl_certificate             /etc/letsencrypt/live/theautomation.nl/fullchain.pem;
    ssl_certificate_key         /etc/letsencrypt/live/theautomation.nl/privkey.pem;
    ssl_dhparam                 /etc/letsencrypt/ssl-dhparams.pem;
    include                     /etc/letsencrypt/options-ssl-nginx.conf;

    location / {
        proxy_pass                  http://prd-drone;
        proxy_set_header            Host                $http_host;
        proxy_set_header            X-Real-IP           $remote_addr;
        proxy_set_header            X-Forwarded-For     $proxy_add_x_forwarded_for;
        proxy_set_header            X-Forwarded-Proto   $scheme;
        proxy_set_header            X-Forwarded-Host    $server_name;
        proxy_redirect              off;
        proxy_http_version          1.1;
        proxy_buffering             off;
        chunked_transfer_encoding   off;
    }
}